From fa549e5180566503c963083524b89d33c57b4d9d Mon Sep 17 00:00:00 2001
From: Deepali Chourasia <deepch23@in.ibm.com>
Date: Thu, 26 May 2022 14:51:53 +0000
Subject: [PATCH] fix to build with opence

---
 recipe/build.sh  | 3 ++-
 recipe/meta.yaml | 4 +---
 2 files changed, 3 insertions(+), 4 deletions(-)

diff --git a/recipe/build.sh b/recipe/build.sh
index 733d8cf..515f6c8 100644
--- a/recipe/build.sh
+++ b/recipe/build.sh
@@ -5,8 +5,9 @@ set -x
 # Use the G77 ABI wrapper everywhere so that the underlying blas implementation
 # can have a G77 ABI (currently only MKL)
 export SCIPY_USE_G77_ABI_WRAPPER=1
+export SCIPY_USE_PYTHRAN=0
 
-if [[ "$python_impl" == "pypy" && "$target_platform" == "linux-ppc64le" ]]; then
+if [[ "$target_platform" == "linux-ppc64le" ]]; then
     $PYTHON setup.py install --single-version-externally-managed --record=record.txt
 else
     $PYTHON -m pip install . -vv
diff --git a/recipe/meta.yaml b/recipe/meta.yaml
index 3197293..d7ee061 100644
--- a/recipe/meta.yaml
+++ b/recipe/meta.yaml
@@ -51,9 +51,7 @@ requirements:
     # https://pav.iki.fi/blog/2017-10-08/pywingfortran.html#building-python-wheels-with-fortran-for-windows
     - {{ compiler('m2w64_fortran') }}        # [win]
   host:
-    - libblas
-    - libcblas
-    - liblapack
+    - libopenblas {{ openblas }}
     - python
     - setuptools <60
     - cython
-- 
2.34.1

